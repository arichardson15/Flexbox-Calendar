<p id="notice"><%= notice %></p>

<h1>Work Orders for 10/1/2019</h1>


<div class="master">


  <div>
    <div><br></div>

    <%  @minute.each do |hour| %>
      <div class="flex_time" id="hour<%= hour %>"><%= hour %></div>


    <%end %>
  </div>


    <% @technicians.each do |technician| %>
      <section class="flex-items"  ><%= technician.name %>
        <% @prior_work_time =  @work_orders[0].time%>
        <% @duration_height = 0 %>
      <% @work_orders.each  do  |work_order|  %>
          <% next unless work_order.technician_id == technician.id %>
          <% first_work_time = work_order.time %>
          <% empty_id = @prior_work_time - first_work_time%>
          <% prior_height = @duration_height%>
          <div class="empty_box"
               onclick="showAlert(<%= ((((work_order.time.strftime('%H').to_i) + ((work_order.time.strftime('%M').to_i)*(1.0/100)*(7/3)))*140)-(840+prior_height))%>)" id = "<%= empty_id %>"
               style="height:<%= ((((work_order.time.strftime('%H').to_i) + ((work_order.time.strftime('%M').to_i)*(1.0/100)*(7/3)))*140)-(840+prior_height))%>px">



            <script> function showAlert(id){


                alert ("There is " + (id/140)*60 + " minutes between work orders" );
            }</script>

          </div>

          <div class="work_order" id="<%= work_order.id %>"  style="height: <%= (work_order.duration/60.0) *140  %>px">
            <% @locations.each do |location| %>
            <% next unless work_order.location_id == location.id %>
              Name:
              <%=location.name %>
              </br>
              City:
              <%= location.city %>
              </br>
              Start Time:
              <%= work_order.time.strftime('%H:%M') %>
              </br>
              Price: $
              <%= work_order.price %>
              </br>
              <% @prior_work_time = work_order.time %>
              <% @duration_height = ((work_order.duration/60.0) *140) +((((work_order.time.strftime('%H').to_i) + ((work_order.time.strftime('%M').to_i)*(1.0/100)*(7/3)))*140)-(840+prior_height) + prior_height)%>
              <% @final_box_height = @duration_height %>
            <%end %>







          </div>


        <% end %>
        <div class="empty_box" style="height: <%= 1690- @final_box_height %>px"></div>

      </section>
    <%end %>


  </div>
</div>
